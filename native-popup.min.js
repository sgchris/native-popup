(function(){var d=function(c,a){if(!1===a instanceof Object||0===Object.keys(a).length||!c)return!1;for(var b in a)a.hasOwnProperty(b)&&(c.style[b]=a[b]);return!0},e=function(c,a){this.id=Math.round(1E5*Math.random());this.html=c||"";this.buttons=a;this.buttons&&!1!==this.buttons instanceof Array&&0!==this.buttons.length||(this.buttons=[]);this.blurScreen=document.getElementById("sp-blur-screen-"+this.id);this.popup=document.getElementById("sp-popup-window-"+this.id);this.closePopupButton=document.getElementById("sp-close-popup-"+
this.id);this.popupContent=document.getElementById("sp-popup-content-"+this.id);this.popupButtonsWrapper=document.getElementById("sp-popup-buttons-"+this.id);var b=this;this._updateScreenDimensions=function(){b.screenWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);b.screenHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)};this._updatePopupDimensions=function(){b._updateScreenDimensions();b.popup.style.top=parseInt(b.screenHeight,10)/2-parseInt(b.popup.clientHeight,
10)/2+"px";b.popup.style.left=parseInt(b.screenWidth,10)/2-parseInt(b.popup.clientWidth,10)/2+"px"}};e.prototype._applyPopupStyles=function(){var c,a={top:0,right:0,bottom:0,left:0,position:"fixed",opacity:.85,background:"#FFF",zIndex:1001};for(c in a)a.hasOwnProperty(c)&&(this.blurScreen.style[c]=a[c]);d(this.popup,{border:"1px solid #CCC",boxShadow:"0 0 5px rgba(0,0,0,0.3)",minWidth:"400px",position:"fixed",background:"#FFF",zIndex:1002});d(this.closePopupButton,{"float":"right",width:"20px",height:"20px",
lineHeight:"20px",textAlign:"center",color:"#CCC",cursor:"pointer",fontSize:"18px",fontWeight:"bold",fontFamily:"verdana, monospace"});d(this.popupContent,{overflow:"auto",minHeight:"300px"});if(this.popupButtonsWrapper){a={padding:"10px",overflow:"hidden"};for(c in a)a.hasOwnProperty(c)&&(this.popupButtonsWrapper.style[c]=a[c]);var b={"float":"right",marginLeft:"10px"};[].forEach.call(this.popupButtonsWrapper.querySelectorAll("button"),function(a){d(a,b)})}};e.prototype.show=function(){var c=this;
this.blurScreen||(this.blurScreen=document.createElement("div"),this.blurScreen.setAttribute("id","sp-blur-screen-"+this.id),document.body.appendChild(this.blurScreen));this.popup||(this.popup=document.createElement("div"),this.popup.setAttribute("id","sp-popup-window-"+this.id),document.body.appendChild(this.popup));this.closePopupButton||(this.closePopupButton=document.createElement("div"),this.closePopupButton.setAttribute("id","sp-close-popup-"+this.id),this.closePopupButton.setAttribute("title",
"close"),this.closePopupButton.textContent="X",this.closePopupButton.addEventListener("click",function(){c.close()}),this.popup.appendChild(this.closePopupButton));this.popupContent||(this.popupContent=document.createElement("div"),this.popupContent.setAttribute("id","sp-popup-content-"+this.id),this.popup.appendChild(this.popupContent));this.html&&0<this.html.length&&(this.popupContent.innerHTML=this.html);0<this.buttons.length&&(this.popupButtonsWrapper||(this.popupButtonsWrapper=document.createElement("div"),
this.popupButtonsWrapper.setAttribute("id","sp-popup-buttons-"+this.id),this.popup.appendChild(this.popupButtonsWrapper)),this.popupButtonsWrapper.innerHTML="",this.buttons.reverse().forEach(function(a){var b=document.createElement("button");b.innerHTML=a.caption;a.callback&&"function"==typeof a.callback&&b.addEventListener("click",a.callback);c.popupButtonsWrapper.appendChild(b)}),this.buttons.reverse());this._applyPopupStyles();this._updatePopupDimensions();window.addEventListener("resize",this._updatePopupDimensions)};
e.prototype.close=function(){window.removeEventListener("resize",this._updatePopupDimensions);this.blurScreen&&this.blurScreen.parentNode.removeChild(this.blurScreen);this.popup&&this.popup.parentNode.removeChild(this.popup);this.popupButtonsWrapper=this.popupContent=this.closePopupButton=this.popup=this.blurScreen=null};window.NativePopup=e})();
