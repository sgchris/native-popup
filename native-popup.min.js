!function(){"use strict";var t=function(t,e){var p;if(e instanceof Object==!1||0===Object.keys(e).length||!t)return!1;for(p in e)e.hasOwnProperty(p)&&(t.style[p]=e[p]);return!0},e=function(t,e){var p={};for(var i in t)t.hasOwnProperty(i)&&(p[i]=t[i]);for(var i in e)e.hasOwnProperty(i)&&(p[i]=e[i]);return p},p=function(t,p,i){this.options=e(this.defaultOptions,i),this.id=Math.round(1e5*Math.random()),this.html=t||"",this.buttons=p,this.buttons&&this.buttons instanceof Array!=!1&&0!==this.buttons.length||(this.buttons=[]),this.blurScreen=document.getElementById("sp-blur-screen-"+this.id),this.popup=document.getElementById("sp-popup-window-"+this.id),this.closePopupButton=document.getElementById("sp-close-popup-"+this.id),this.popupContent=document.getElementById("sp-popup-content-"+this.id),this.popupButtonsWrapper=document.getElementById("sp-popup-buttons-"+this.id);var o=this;this._updateScreenDimensions=function(){o.screenWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o.screenHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)},this._updatePopupDimensions=function(){o._updateScreenDimensions(),o.popup.style.top=parseInt(o.screenHeight,10)/2-parseInt(o.popup.clientHeight,10)/2+"px",o.popup.style.left=parseInt(o.screenWidth,10)/2-parseInt(o.popup.clientWidth,10)/2+"px"}};p.prototype.defaultOptions={width:400,height:300},p.prototype._applyPopupStyles=function(){var e,p=this,i={top:0,right:0,bottom:0,left:0,position:"fixed",opacity:.85,background:"#FFF",zIndex:1001};for(e in i)i.hasOwnProperty(e)&&(this.blurScreen.style[e]=i[e]);var o=Math.ceil(.3*this.screenWidth);(!p.options.width||p.options.width<o)&&(p.options.width=o);var n=Math.ceil(.85*this.screenWidth);(!p.options.width||p.options.width>n)&&(p.options.width=o);var s=Math.ceil(.3*this.screenHeight);(!p.options.height||p.options.height<s)&&(p.options.height=s);var h=Math.ceil(.85*this.screenHeight);(!p.options.height||p.options.height>h)&&(p.options.height=h);var r={border:"1px solid #CCC",boxShadow:"0 0 5px rgba(0,0,0,0.3)",position:"fixed",width:p.options.width+"px",height:p.options.height+"px",maxWidth:n,minWidth:o,maxHeight:h,minHeight:s,overflow:"hidden",background:"#FFF",zIndex:1002};t(this.popup,r),t(this.closePopupButton,{float:"right",width:"20px",height:"20px",lineHeight:"20px",textAlign:"center",color:"#CCC",cursor:"pointer",fontSize:"18px",fontWeight:"bold",fontFamily:"verdana, monospace"});var u={overflow:"auto",height:r.height};if(t(this.popupContent,u),this.popupButtonsWrapper){var l={padding:"10px",overflow:"hidden"};for(e in l)l.hasOwnProperty(e)&&(this.popupButtonsWrapper.style[e]=l[e]);var d={float:"right",marginLeft:"10px"};[].forEach.call(this.popupButtonsWrapper.querySelectorAll("button"),function(e){t(e,d)})}},p.prototype.show=function(){var t=this;this.blurScreen||(this.blurScreen=document.createElement("div"),this.blurScreen.setAttribute("id","sp-blur-screen-"+this.id),document.body.appendChild(this.blurScreen)),this.popup||(this.popup=document.createElement("div"),this.popup.setAttribute("id","sp-popup-window-"+this.id),document.body.appendChild(this.popup)),this.closePopupButton||(this.closePopupButton=document.createElement("div"),this.closePopupButton.setAttribute("id","sp-close-popup-"+this.id),this.closePopupButton.setAttribute("title","close"),this.closePopupButton.textContent="X",this.closePopupButton.addEventListener("click",function(){t.close()}),this.popup.appendChild(this.closePopupButton)),this.popupContent||(this.popupContent=document.createElement("div"),this.popupContent.setAttribute("id","sp-popup-content-"+this.id),this.popup.appendChild(this.popupContent)),this.html&&this.html.length>0&&(this.popupContent.innerHTML=this.html),this.buttons.length>0&&(this.popupButtonsWrapper||(this.popupButtonsWrapper=document.createElement("div"),this.popupButtonsWrapper.setAttribute("id","sp-popup-buttons-"+this.id),this.popup.appendChild(this.popupButtonsWrapper)),this.popupButtonsWrapper.innerHTML="",this.buttons.reverse().forEach(function(e){var p=document.createElement("button");p.innerHTML=e.caption,e.callback&&"function"==typeof e.callback&&p.addEventListener("click",e.callback),t.popupButtonsWrapper.appendChild(p)}),this.buttons.reverse()),this._applyPopupStyles(),this._updatePopupDimensions(),window.addEventListener("resize",this._updatePopupDimensions)},p.prototype.close=function(){window.removeEventListener("resize",this._updatePopupDimensions),this.blurScreen&&this.blurScreen.parentNode.removeChild(this.blurScreen),this.popup&&this.popup.parentNode.removeChild(this.popup),this.blurScreen=null,this.popup=null,this.closePopupButton=null,this.popupContent=null,this.popupButtonsWrapper=null},window.NativePopup=p}();
